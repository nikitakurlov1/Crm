<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <title>Настройки</title>
    <link rel="icon" type="image/svg+xml" href="sellbit-logo-icon.svg">
    <link rel="apple-touch-icon" href="sellbit-logo-main.jpg">
    <meta name="theme-color" content="#0a192f">
    <meta name="msapplication-TileColor" content="#0a192f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SellBit">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="SellBit">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="setting.css">
    <link rel="stylesheet" href="bottom-nav.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="logos.js"></script>
    <script src="api-utils.js"></script>
    <script src="pwa-register.js"></script>
</head>
<body>
    <!-- PWA Status Bar -->
    <div class="pwa-status-bar"></div>
    
    
    <div class="app-container">
        <!-- Main Content -->
        <main class="main-content">
            <!-- Profile Card -->
            <section class="settings-section">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <img src="sellbit-logo-main.jpg" alt="Avatar" class="avatar-img" onerror="this.src='sellbit-logo-icon.svg'">
                        <button class="edit-avatar-btn" onclick="showToast('Функция в разработке', 'info')">
                            <i class="fas fa-pencil-alt"></i>
                        </button>
                    </div>
                    <div class="profile-info">
                        <h3 class="profile-name" id="profileName">Загрузка...</h3>
                        <p class="profile-email" id="profileEmail">Загрузка...</p>
                        <button class="text-btn edit-profile-btn" onclick="showToast('Функция в разработке', 'info')">
                            Редактировать профиль
                        </button>
                    </div>
                </div>
            </section>

            <!-- Preferences -->
            <section class="settings-section">
                <h2 class="section-title">Предпочтения</h2>
                <div class="settings-list">
                    <div class="setting-item">
                        <div class="setting-left">
                            <i class="fas fa-eye setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Скрыть баланс</h4>
                                <p class="setting-description">Скрыть суммы в приложении</p>
                            </div>
                        </div>
                        <div class="setting-right">
                            <label class="toggle-switch">
                                <input type="checkbox" id="hideBalanceToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-left">
                            <i class="fas fa-bell setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Уведомления</h4>
                                <p class="setting-description">Получать уведомления о транзакциях</p>
                            </div>
                        </div>
                        <div class="setting-right">
                            <label class="toggle-switch">
                                <input type="checkbox" id="notificationsToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-left">
                            <i class="fas fa-chart-line setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Автообновление</h4>
                                <p class="setting-description">Автоматически обновлять данные</p>
                            </div>
                        </div>
                        <div class="setting-right">
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoUpdateToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="setting-item" onclick="openChangePasswordModal()">
                        <div class="setting-left">
                            <i class="fas fa-lock setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Сменить пароль</h4>
                                <p class="setting-description">Изменить ваш пароль</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                </div>
            </section>

            <!-- Data Management -->
            <section class="settings-section">
                <h2 class="section-title">Управление данными</h2>
                <div class="settings-list">
                    <div class="setting-item" onclick="clearHistory()">
                        <div class="setting-left">
                            <i class="fas fa-trash setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Очистить историю</h4>
                                <p class="setting-description">Удалить все транзакции</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                    <div class="setting-item" onclick="exportData()">
                        <div class="setting-left">
                            <i class="fas fa-download setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Экспорт данных</h4>
                                <p class="setting-description">Скачать историю транзакций</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                    <div class="setting-item" onclick="resetApp()">
                        <div class="setting-left">
                            <i class="fas fa-redo setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Сбросить приложение</h4>
                                <p class="setting-description">Очистить все данные и настройки</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                </div>
            </section>

            <!-- Support & About -->
            <section class="settings-section">
                <h2 class="section-title">Поддержка</h2>
                <div class="settings-list">
                    <div class="setting-item" onclick="window.location.href='support.html'">
                        <div class="setting-left">
                            <i class="fas fa-headset setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">Связаться с поддержкой</h4>
                                <p class="setting-description">Чат и обратная связь</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                    <div class="setting-item">
                        <div class="setting-left">
                            <i class="fas fa-info-circle setting-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title">О приложении</h4>
                                <p class="setting-description">Версия 1.0.0</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right setting-arrow"></i>
                    </div>
                </div>
            </section>

            <!-- Logout -->
            <section class="settings-section">
                <div class="settings-list">
                    <div class="setting-item logout-item">
                        <div class="setting-left">
                            <i class="fas fa-sign-out-alt setting-icon logout-icon"></i>
                            <div class="setting-content">
                                <h4 class="setting-title logout-title">Выйти</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn" onclick="window.location.href='home.html'">
                <i class="fas fa-home"></i>
                <span>Главная</span>
            </button>
            <button class="nav-btn" onclick="window.location.href='coins.html'">
                <i class="fas fa-coins"></i>
                <span>Монеты</span>
            </button>
            <button class="nav-btn" onclick="window.location.href='coininfo.html'">
                <i class="fas fa-chart-line"></i>
                <span>Торговля</span>
            </button>
            <button class="nav-btn active">
                <i class="fas fa-cog"></i>
                <span>Настройки</span>
            </button>
        </nav>
    </div>

    <!-- Change Password Modal -->
    <div class="modal" id="changePasswordModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Сменить пароль</h3>
                <button class="icon-btn" onclick="closeModal('changePasswordModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm">
                    <div class="form-group">
                        <label>Текущий пароль</label>
                        <input type="password" id="currentPassword" placeholder="Введите текущий пароль" required>
                    </div>
                    <div class="form-group">
                        <label>Новый пароль</label>
                        <input type="password" id="newPassword" placeholder="Введите новый пароль" required>
                    </div>
                    <div class="form-group">
                        <label>Подтвердите новый пароль</label>
                        <input type="password" id="confirmPassword" placeholder="Повторите новый пароль" required>
                    </div>
                    <button type="submit" class="btn-primary">Сменить пароль</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script src="logout.js"></script>
    <script src="setting.js"></script>
</body>
</html>